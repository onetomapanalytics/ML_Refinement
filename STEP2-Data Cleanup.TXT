
STEP-2 Cleaning up the yearly files, removing extra variables, looking for missing values, dropping the missing data etc. 
This step was repeated on the yearly files from 2012-2019.

*Project Emergency Surgeries NISQIP

*File name and path 
use "Z:\acs_nsqip_puf19.dta"

rename *, upper

tab MORTALITY
tab SURVIVAL
drop ADMYR OPERYR

drop OTHERPROC1 OTHERCPT1 OTHERWRVU1 OTHERPROC2 OTHERCPT2 OTHERWRVU2 OTHERPROC3 OTHERCPT3 OTHERWRVU3 OTHERPROC4 OTHERCPT4 OTHERWRVU4 OTHERPROC5 OTHERCPT5 OTHERWRVU5 OTHERPROC6 OTHERCPT6 OTHERWRVU6 OTHERPROC7 OTHERCPT7 OTHERWRVU7 OTHERPROC8 OTHERCPT8 OTHERWRVU8 OTHERPROC9 OTHERCPT9 OTHERWRVU9 OTHERPROC10 OTHERCPT10 OTHERWRVU10 CONCURR1 CONCPT1 CONWRVU1 CONCURR2 CONCPT2 CONWRVU2 CONCURR3 CONCPT3 CONWRVU3 CONCURR4 CONCPT4 CONWRVU4 CONCURR5 CONCPT5 CONWRVU5 CONCURR6 CONCPT6 CONWRVU6 CONCURR7 CONCPT7 CONWRVU7 CONCURR8 CONCPT8 CONWRVU8 CONCURR9 CONCPT9 CONWRVU9 CONCURR10 CONCPT10 CONWRVU10 

drop HDISDT YRDEATH ADMQTR
drop SSSIPATOS DSUPINFEC
drop DSSIPATOS DWNDINFD
drop OSSIPATOS DORGSPCSSI
drop DEHIS DDEHIS
drop SUPINFEC WNDINFD ORGSPCSSI

drop OUPNEUMO PNAPATOS DOUPNEUMO
drop REINTUB DREINTUB NPULEMBOL
drop DPULEMBOL
drop DFAILWEAN VENTPATOS
tab NRENAINSF
drop RENAINSF DRENAINSF
tab NOPRENAFL 
drop OPRENAFL DOPRENAFL
drop URNINFEC UTIPATOS DURNINFEC
drop CNSCVA DCNSCVA
drop CDARREST DCDARREST
drop CDMI DCDMI
drop OTHBLEED DOTHBLEED
drop OTHDVT DOTHDVT
drop OTHSYSEP SEPSISPATOS DOTHSYSEP
drop OTHSESHOCK SEPSHOCKPATOS DOTHSESHOCK
drop PODIAG PODIAGTX
tab NOTHCDIFF 
drop OTHCDIFF DOTHCDIFF
drop STILLINHOSP RETORRELATED REOPORICD91 REOPOR1ICD101 REOPERATION2 RETOR2PODAYS REOPOR2CPT1 RETOR2RELATED REOPOR2ICD91 REOPOR2ICD101 REOPERATION3 READMRELATED1 READMSUSPREASON1 READMUNRELSUSP1 READMRELICD91 READMRELICD101 READMUNRELICD91 READMUNRELICD101 READMISSION2 READMPODAYS2 UNPLANNEDREADMISSION2 READMRELATED2 READMSUSPREASON2 READMUNRELSUSP2 READMRELICD92 READMRELICD102 READMUNRELICD92 READMUNRELICD102 READMISSION3 READMPODAYS3 UNPLANNEDREADMISSION3 READMRELATED3 READMSUSPREASON3 READMUNRELSUSP3 READMRELICD93 READMRELICD103 READMUNRELICD93 READMUNRELICD103 READMISSION4 READMPODAYS4 UNPLANNEDREADMISSION4 READMRELATED4 READMSUSPREASON4 READMUNRELSUSP4 READMRELICD94 READMRELICD104 READMUNRELICD94 READMUNRELICD104 READMISSION5 READMPODAYS5 UNPLANNEDREADMISSION5 READMRELATED5 READMSUSPREASON5 READMUNRELSUSP5 READMRELICD95 READMRELICD105 READMUNRELICD95 READMUNRELICD105 PODIAG_OTHER PODIAG_OTHER10 ANESTHES_OTHER


*Create categories for age, transfer status and HtoODays vairble 

tab AGE

gen Age_Cat = "30-35" if AGE <= "35" 
replace Age_Cat = "36-40" if AGE >= "36" & AGE <= "40" 
replace Age_Cat = "41-45" if AGE >= "40" & AGE <= "45" 
replace Age_Cat = "46-50" if AGE >= "46" & AGE <= "50" 
replace Age_Cat = "51-55" if AGE >= "51" & AGE <= "55" 
replace Age_Cat = "56-60" if AGE >= "56" & AGE <= "60" 
replace Age_Cat = "61-65" if AGE >= "61" & AGE <= "65" 
replace Age_Cat = "66-70" if AGE >= "66" & AGE <= "70" 
replace Age_Cat = "71-75" if AGE >= "71" & AGE <= "75" 
replace Age_Cat = "76-80" if AGE >= "76" & AGE <= "80" 
replace Age_Cat = "81-85" if AGE >= "81" & AGE <= "85" 
replace Age_Cat = "86-90" if AGE >= "86" & AGE <= "90" 
replace Age_Cat = "90+" if AGE == "90+" 

tab Age_Cat

tab TRANST
gen Transfer = "1_Home" if TRANST == "Not transferred (admitted from home)" 
replace Transfer = "Acute_Care" if TRANST == "From acute care hospital inpatient" 
replace Transfer = "Nursing_Home" if TRANST == "Nursing home - Chronic care - Intermediate care" 
replace Transfer = "Outside_ED" if TRANST == "Outside emergency department" 
replace Transfer = "Others" if TRANST == "Transfer from other" 
replace Transfer = "Others" if TRANST == "Unknown" 

tab Transfer 

tab RACE_NEW
replace RACE_NEW = "White" if RACE_NEW == "Unknown/Not Reported"

tab FNSTATUS2
replace FNSTATUS2 = "Independent" if FNSTATUS2 == "Unknown"

tab WNDCLAS
 
save "\2019_V2", replace 